% $Id$

\chapter{The DocBook and TEI DTD's}
% \mycitation{Read the manual before entering the cave -- you might get
%   killed otherwise.}{The NetHack game}{\myurl{http://www.nethack.org}{www.nethack.org}}

\section{DocBook considerations}
\label{sec:docbook}


\myurl{http://www.docbook.org}{DocBook} is a DTD designed for
documenting software.  Used by Sun, FreeBSD, O'Reilly and others.


\textsf{
The SGML is converted to HTML by applying a HTML style sheet for
DocBook, and sending it through jade with request for a sgml
conversion.  The stylesheet generates a HTML file pr section in a
chapter which is rather too much.  The HTML is \textit{very} ugly - all
induced line breaks are \textit{within} the tags to avoid introducing any
artificial whitespace.  The HTML is Lynx-compatible.
}

\textsf{screen shot}
The generated navigation tags are a little troublesome in Lynx, but
nice in Netscape.  A ``up'', ``next'' and ``previous'' are available
combined with a ``Top title''-$>$''Chapter title'' -$>$ ``Section title''
navigation bar at the top.

The localization code is manually maintained.

It is possible to have a DocBook XML-file which can be processed both
with XSL-stylesheets \textit{and} DSSSL-stylesheets, by letting the
!DOCTYPE header point to the DocBook XML DTD along with
system-dependent path (which is required by XML).  A sample header for
DocBook is listed below:

\begin{verbatim}
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE article 
  PUBLIC "-//Norman Walsh//DTD Simplified DocBk XML V3.1.3.6//EN" 
  "/home/ravn/sgml/docbk/db315/docbookx.dtd">
\end{verbatim}

If the \texttt{standalone="yes"} field is set in the \tag{?xml?}-tag
instead, it means that the XML-tools will not validate the contents
against the DTD \textsf{does this increase performance?}, but still
apply the style sheets.

\begin{table}[htbp]
  \begin{center}
    \begin{tabular}[tb]{|l|p{12cm}|}
\hline\hline
Format & Command \\
\hline
  XHTML-1.0 & java com.jclark.xsl.sax.Driver \$$<$ ../docbook/xhtml/docbook.xsl \$@\\
  HTML-\textsf{4.0} & java com.jclark.xsl.sax.Driver \$$<$
  ../docbook/html/docbook.xsl \$@ \\

  XSL-FO & java com.jclark.xsl.sax.Driver \$$<$ ../docbook/fo/docbook.xsl \$@ \\
  RTF & jade -t rtf -d \$(HOME)/sgml/dsssl/docbook/print/docbook.dsl \$(HOME)/jade/pubtext/xml.dcl \$$<$\\
  MIF (Frame) & \\
  {\TeX} & \\
  PDF (from FO) & java org.apache.fop.apps.CommandLine $< $@\\
  PDF (from FO) & tex '\&pdffotex' document.fo \\
  PDF (via {\TeX} & \\
  OThers? & \\
\hline
    \end{tabular}
    \caption{Output formats possible for a DocBook XML document}
    \label{tab:output-formats-possible-for-a-docbook-xml-document}
  \end{center}
\end{table}

Generally XSL conversions (commands starting with java) are fast
enough to be done ``on-the-fly'', where DSSSL conversions (commands
starting with jade) are \textsf{too slow for this (timing?)}.


\section{TEI -- Text Encoding Initiative}
\label{sec:tei}



\section{Converting documents to other formats}
\label{sec:docbook-converting-documents-to-other-formats}


\subsection{SGML to XML}
\label{docbook-converting-sgml-to-xml}

\begin{alltt}
  sx -biso-8859-1 -xlower input.sgml $>$ output.xml
\end{alltt}

The DTD for the document \textit{must} be registered in the
\textsf{catalog}.  Even so a number of warnings and errors may be
printed, since some SGML-constructions cannot be represented in XML,
and some entities are unknown.  This must be handled manually - SX is
not a tool do this perfectly.


\subsection{XML to RTF}
\label{sec:docbook-xml-to-rtf}

Use \texttt{jade} with the appropriate stylesheet and \textsf{....}

\begin{alltt}
         jade -t rtf -d docbook.dsl xml.dcl inputfile.xml
\end{alltt}

where \texttt{docbook.dsl} is one of the stylesheets from the
\textsf{DocBook Modular StyleSheets}
(\texttt{dsssl/docbook/print/docbook.dsl}) and \texttt{xml.dcl} comes
from the Jade distribution (\texttt{pubtext/xml.dcl})

The resulting RTF-file is compatible with Word-97, Word-95 (claimed by
author), StarOffice, \textsf{other texteditors} 

\textsf{other backends}

SQL to XML :: Coocncococns sql processsor

\section{A sample DocBook XML document}
\label{sec:amanda-readme.xml}

I have marked up a DocBook XML version of the
\myurl{ftp://ftp.amanda.org/pub/amanda/README}{README file for the
  AMANDA backup system}, as part of the general transition to an
SGML-based documentation set for AMANDA.  I have used it as a test
document for the XML-publishing sample filter-set in
\myvref{sec:xml-publishing}.

There are a few caveats for HTML-knowledgable people:

\begin{itemize}
\item Each paragraph must be enclosed in a \tag{para}-tag.  Also
  inside a \tag{listitem}-tag.
\item \tag{sect1}, \tag{sect2} etc. encloses around the \textit{whole} section, and the
  \tag{title}-tag shows the title of the section.
\end{itemize}  
In order to be processable by SGML tools like Jade (to get RTF output)
it is necessary to have a \tag{!DOCTYPE} entry, which again requires
-- for XML compatibility -- that the DTD is explicitly given.  This
particular document conforms to
\myurl{http://www.nwalsh.com/docbook/simple/index.html}{the
  "Simplified" DocBk XML DTD}.



\listinginput{1}{../sample/AMANDA-README.xml}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "rapport"
%%% End: 
